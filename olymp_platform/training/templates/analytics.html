{% extends "base.html" %}
{% block content %}

<div class="card">
  <h2>üìä –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>

  <div style="display:flex; gap:20px; flex-wrap:wrap;">
    <div class="profile-box">–í—Å–µ–≥–æ –ø–æ–ø—ã—Ç–æ–∫: {{ total }}</div>
    <div class="profile-box">–¢–æ—á–Ω–æ—Å—Ç—å: {{ accuracy }}%</div>
    <div class="profile-box">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è: {{ avg_time }} —Å–µ–∫</div>
  </div>
</div>

<br>

<div class="card">
  <h3>üìö –ü–æ —Ç–µ–º–∞–º</h3>

  <table style="width:100%; border-collapse:collapse;">
    <tr>
      <th align="left">–ü—Ä–µ–¥–º–µ—Ç</th>
      <th>–¢–æ—á–Ω–æ—Å—Ç—å</th>
      <th>–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö</th>
      <th>–ü–æ–ø—ã—Ç–æ–∫</th>
    </tr>

  {% for row in topics_stats %}
    <tr>
      <td>{{ row.topic }}</td>
      <td class="c">{{ row.accuracy }}%</td>
      <td class="c">{{ row.correct }}</td>
      <td class="c">{{ row.total }}</td>
    </tr>
  {% endfor %}

  </table>
</div>


<br>

<div class="card">
  <h3>üìà –ü—Ä–æ–≥—Ä–µ—Å—Å</h3>
  <canvas id="progressChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
const ctx = document.getElementById('progressChart');

new Chart(ctx, {
    type: 'line',
    data: {
        labels: {{ dates|safe }},
        datasets: [{
            label: '–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã',
            data: {{ values|safe }},
            tension: 0.3
        }]
    }
});
</script>

{% endblock %}
